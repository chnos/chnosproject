     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_vsprintf
     7 00000000                                 	EXTERN	_api_putstr0
     8 00000000                                 	EXTERN	_api_initmalloc
     9 00000000                                 	EXTERN	_api_malloc
    10 00000000                                 	EXTERN	_api_openwin
    11 00000000                                 	EXTERN	_api_linewin
    12 00000000                                 	EXTERN	_api_refreshwin
    13 00000000                                 	EXTERN	_api_getkey
    14 00000000                                 	EXTERN	_api_closewin
    15 00000000                                 	EXTERN	_api_end
    16 00000000                                 [FILE "lines.ca"]
    17                                          [SECTION .text]
    18 00000000                                 	GLOBAL	_printf
    19 00000000                                 _printf:
    20 00000000 55                              	PUSH	EBP
    21 00000001 89 E5                           	MOV	EBP,ESP
    22 00000003 56                              	PUSH	ESI
    23 00000004 53                              	PUSH	EBX
    24 00000005 81 EC 000003F0                  	SUB	ESP,1008
    25 0000000B 8D 45 0C                        	LEA	EAX,DWORD [12+EBP]
    26 0000000E 8D 9D FFFFFC08                  	LEA	EBX,DWORD [-1016+EBP]
    27 00000014 50                              	PUSH	EAX
    28 00000015 FF 75 08                        	PUSH	DWORD [8+EBP]
    29 00000018 53                              	PUSH	EBX
    30 00000019 E8 [00000000]                   	CALL	_vsprintf
    31 0000001E 53                              	PUSH	EBX
    32 0000001F 89 C6                           	MOV	ESI,EAX
    33 00000021 E8 [00000000]                   	CALL	_api_putstr0
    34 00000026 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    35 00000029 89 F0                           	MOV	EAX,ESI
    36 0000002B 5B                              	POP	EBX
    37 0000002C 5E                              	POP	ESI
    38 0000002D 5D                              	POP	EBP
    39 0000002E C3                              	RET
    40                                          [SECTION .data]
    41 00000000                                 LC0:
    42 00000000 6C 69 6E 65 73 00               	DB	"lines",0x00
    43                                          [SECTION .text]
    44 0000002F                                 	GLOBAL	_CHNMain
    45 0000002F                                 _CHNMain:
    46 0000002F 55                              	PUSH	EBP
    47 00000030 89 E5                           	MOV	EBP,ESP
    48 00000032 57                              	PUSH	EDI
    49 00000033 56                              	PUSH	ESI
    50 00000034 31 FF                           	XOR	EDI,EDI
    51 00000036 53                              	PUSH	EBX
    52 00000037 31 F6                           	XOR	ESI,ESI
    53 00000039 51                              	PUSH	ECX
    54 0000003A E8 [00000000]                   	CALL	_api_initmalloc
    55 0000003F 68 00003E80                     	PUSH	16000
    56 00000044 E8 [00000000]                   	CALL	_api_malloc
    57 00000049 68 [00000000]                   	PUSH	LC0
    58 0000004E 6A FF                           	PUSH	-1
    59 00000050 6A 64                           	PUSH	100
    60 00000052 68 000000A0                     	PUSH	160
    61 00000057 50                              	PUSH	EAX
    62 00000058 E8 [00000000]                   	CALL	_api_openwin
    63 0000005D 83 C4 18                        	ADD	ESP,24
    64 00000060 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
    65 00000063                                 L7:
    66 00000063 56                              	PUSH	ESI
    67 00000064 8D 47 1A                        	LEA	EAX,DWORD [26+EDI]
    68 00000067 50                              	PUSH	EAX
    69 00000068 6A 4D                           	PUSH	77
    70 0000006A 6A 1A                           	PUSH	26
    71 0000006C 6A 08                           	PUSH	8
    72 0000006E 8B 5D F0                        	MOV	EBX,DWORD [-16+EBP]
    73 00000071 43                              	INC	EBX
    74 00000072 53                              	PUSH	EBX
    75 00000073 E8 [00000000]                   	CALL	_api_linewin
    76 00000078 8D 47 58                        	LEA	EAX,DWORD [88+EDI]
    77 0000007B 56                              	PUSH	ESI
    78 0000007C 83 C7 09                        	ADD	EDI,9
    79 0000007F 6A 59                           	PUSH	89
    80 00000081 46                              	INC	ESI
    81 00000082 50                              	PUSH	EAX
    82 00000083 6A 1A                           	PUSH	26
    83 00000085 6A 58                           	PUSH	88
    84 00000087 53                              	PUSH	EBX
    85 00000088 E8 [00000000]                   	CALL	_api_linewin
    86 0000008D 83 C4 30                        	ADD	ESP,48
    87 00000090 83 FE 07                        	CMP	ESI,7
    88 00000093 7E CE                           	JLE	L7
    89 00000095 6A 5A                           	PUSH	90
    90 00000097 68 0000009A                     	PUSH	154
    91 0000009C 6A 1A                           	PUSH	26
    92 0000009E 6A 06                           	PUSH	6
    93 000000A0 FF 75 F0                        	PUSH	DWORD [-16+EBP]
    94 000000A3 E8 [00000000]                   	CALL	_api_refreshwin
    95 000000A8 83 C4 14                        	ADD	ESP,20
    96 000000AB                                 L8:
    97 000000AB 6A 01                           	PUSH	1
    98 000000AD E8 [00000000]                   	CALL	_api_getkey
    99 000000B2 5A                              	POP	EDX
   100 000000B3 83 F8 0A                        	CMP	EAX,10
   101 000000B6 75 F3                           	JNE	L8
   102 000000B8 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   103 000000BB E8 [00000000]                   	CALL	_api_closewin
   104 000000C0 58                              	POP	EAX
   105 000000C1 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   106 000000C4 5B                              	POP	EBX
   107 000000C5 5E                              	POP	ESI
   108 000000C6 5F                              	POP	EDI
   109 000000C7 5D                              	POP	EBP
   110 000000C8 E9 [00000000]                   	JMP	_api_end
