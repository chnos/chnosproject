     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_vsprintf
     7 00000000                                 	EXTERN	_api_putstr0
     8 00000000                                 	EXTERN	__alloca
     9 00000000                                 	EXTERN	_api_openwin
    10 00000000                                 	EXTERN	_api_getkey
    11 00000000                                 	EXTERN	_api_end
    12 00000000                                 [FILE "winhelo.ca"]
    13                                          [SECTION .text]
    14 00000000                                 	GLOBAL	_printf
    15 00000000                                 _printf:
    16 00000000 55                              	PUSH	EBP
    17 00000001 89 E5                           	MOV	EBP,ESP
    18 00000003 56                              	PUSH	ESI
    19 00000004 53                              	PUSH	EBX
    20 00000005 81 EC 000003F0                  	SUB	ESP,1008
    21 0000000B 8D 45 0C                        	LEA	EAX,DWORD [12+EBP]
    22 0000000E 8D 9D FFFFFC08                  	LEA	EBX,DWORD [-1016+EBP]
    23 00000014 50                              	PUSH	EAX
    24 00000015 FF 75 08                        	PUSH	DWORD [8+EBP]
    25 00000018 53                              	PUSH	EBX
    26 00000019 E8 [00000000]                   	CALL	_vsprintf
    27 0000001E 53                              	PUSH	EBX
    28 0000001F 89 C6                           	MOV	ESI,EAX
    29 00000021 E8 [00000000]                   	CALL	_api_putstr0
    30 00000026 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
    31 00000029 89 F0                           	MOV	EAX,ESI
    32 0000002B 5B                              	POP	EBX
    33 0000002C 5E                              	POP	ESI
    34 0000002D 5D                              	POP	EBP
    35 0000002E C3                              	RET
    36                                          [SECTION .data]
    37 00000000                                 LC0:
    38 00000000 68 65 6C 6C 6F 00               	DB	"hello",0x00
    39                                          [SECTION .text]
    40 0000002F                                 	GLOBAL	_CHNMain
    41 0000002F                                 _CHNMain:
    42 0000002F 55                              	PUSH	EBP
    43 00000030 B8 00001D50                     	MOV	EAX,7504
    44 00000035 89 E5                           	MOV	EBP,ESP
    45 00000037 E8 [00000000]                   	CALL	__alloca
    46 0000003C 68 [00000000]                   	PUSH	LC0
    47 00000041 6A FF                           	PUSH	-1
    48 00000043 8D 85 FFFFE2B0                  	LEA	EAX,DWORD [-7504+EBP]
    49 00000049 6A 32                           	PUSH	50
    50 0000004B 68 00000096                     	PUSH	150
    51 00000050 50                              	PUSH	EAX
    52 00000051 E8 [00000000]                   	CALL	_api_openwin
    53 00000056 83 C4 14                        	ADD	ESP,20
    54 00000059                                 L3:
    55 00000059 6A 01                           	PUSH	1
    56 0000005B E8 [00000000]                   	CALL	_api_getkey
    57 00000060 5A                              	POP	EDX
    58 00000061 83 F8 0A                        	CMP	EAX,10
    59 00000064 75 F3                           	JNE	L3
    60 00000066 E8 [00000000]                   	CALL	_api_end
    61 0000006B C9                              	LEAVE
    62 0000006C C3                              	RET
