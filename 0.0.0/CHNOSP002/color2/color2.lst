     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_api_initmalloc
     7 00000000                                 	EXTERN	_api_malloc
     8 00000000                                 	EXTERN	_api_openwin
     9 00000000                                 	EXTERN	_api_refreshwin
    10 00000000                                 	EXTERN	_api_getkey
    11 00000000                                 	EXTERN	_api_end
    12 00000000                                 [FILE "color2.ca"]
    13                                          [SECTION .data]
    14 00000000                                 LC0:
    15 00000000 B6 D7 B0 CA DF C0 B0 DD         	DB	0xB6,0xD7,0xB0,0xCA,0xDF,0xC0,0xB0,0xDD
    16 00000008 32 00                           	DB	"2",0x00
    17                                          [SECTION .text]
    18 00000000                                 	GLOBAL	_CHNMain
    19 00000000                                 _CHNMain:
    20 00000000 55                              	PUSH	EBP
    21 00000001 89 E5                           	MOV	EBP,ESP
    22 00000003 57                              	PUSH	EDI
    23 00000004 56                              	PUSH	ESI
    24 00000005 31 FF                           	XOR	EDI,EDI
    25 00000007 53                              	PUSH	EBX
    26 00000008 83 EC 0C                        	SUB	ESP,12
    27 0000000B E8 [00000000]                   	CALL	_api_initmalloc
    28 00000010 68 00005C40                     	PUSH	23616
    29 00000015 E8 [00000000]                   	CALL	_api_malloc
    30 0000001A 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
    31 0000001D 68 [00000000]                   	PUSH	LC0
    32 00000022 6A FF                           	PUSH	-1
    33 00000024 68 000000A4                     	PUSH	164
    34 00000029 68 00000090                     	PUSH	144
    35 0000002E 50                              	PUSH	EAX
    36 0000002F E8 [00000000]                   	CALL	_api_openwin
    37 00000034 83 C4 18                        	ADD	ESP,24
    38 00000037 C7 45 E8 00000000               	MOV	DWORD [-24+EBP],0
    39 0000003E 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
    40 00000041                                 L11:
    41 00000041 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
    42 00000044 8B 55 F0                        	MOV	EDX,DWORD [-16+EBP]
    43 00000047 31 F6                           	XOR	ESI,ESI
    44 00000049 8D 9C 02 00000FC8               	LEA	EBX,DWORD [4040+EDX+EAX*1]
    45 00000050                                 L10:
    46 00000050 57                              	PUSH	EDI
    47 00000051 8D 04 3F                        	LEA	EAX,DWORD [EDI+EDI*1]
    48 00000054 56                              	PUSH	ESI
    49 00000055 6A 00                           	PUSH	0
    50 00000057 50                              	PUSH	EAX
    51 00000058 8D 04 36                        	LEA	EAX,DWORD [ESI+ESI*1]
    52 0000005B 50                              	PUSH	EAX
    53 0000005C 46                              	INC	ESI
    54 0000005D E8 00000044                     	CALL	_rgb2pal
    55 00000062 83 C4 14                        	ADD	ESP,20
    56 00000065 88 03                           	MOV	BYTE [EBX],AL
    57 00000067 43                              	INC	EBX
    58 00000068 83 FE 7F                        	CMP	ESI,127
    59 0000006B 7E E3                           	JLE	L10
    60 0000006D 47                              	INC	EDI
    61 0000006E 81 45 E8 00000090               	ADD	DWORD [-24+EBP],144
    62 00000075 83 FF 7F                        	CMP	EDI,127
    63 00000078 7E C7                           	JLE	L11
    64 0000007A 68 0000009C                     	PUSH	156
    65 0000007F 68 00000088                     	PUSH	136
    66 00000084 6A 1C                           	PUSH	28
    67 00000086 6A 08                           	PUSH	8
    68 00000088 FF 75 EC                        	PUSH	DWORD [-20+EBP]
    69 0000008B E8 [00000000]                   	CALL	_api_refreshwin
    70 00000090 6A 01                           	PUSH	1
    71 00000092 E8 [00000000]                   	CALL	_api_getkey
    72 00000097 83 C4 18                        	ADD	ESP,24
    73 0000009A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    74 0000009D 5B                              	POP	EBX
    75 0000009E 5E                              	POP	ESI
    76 0000009F 5F                              	POP	EDI
    77 000000A0 5D                              	POP	EBP
    78 000000A1 E9 [00000000]                   	JMP	_api_end
    79                                          [SECTION .data]
    80 0000000A 00 00                           	ALIGNB	4
    81 0000000C                                 _table.0:
    82 0000000C 00000003                        	DD	3
    83 00000010 00000001                        	DD	1
    84 00000014 00000000                        	DD	0
    85 00000018 00000002                        	DD	2
    86                                          [SECTION .text]
    87 000000A6                                 	GLOBAL	_rgb2pal
    88 000000A6                                 _rgb2pal:
    89 000000A6 55                              	PUSH	EBP
    90 000000A7 89 E5                           	MOV	EBP,ESP
    91 000000A9 57                              	PUSH	EDI
    92 000000AA 56                              	PUSH	ESI
    93 000000AB BF 00000100                     	MOV	EDI,256
    94 000000B0 53                              	PUSH	EBX
    95 000000B1 BE 00000100                     	MOV	ESI,256
    96 000000B6 83 EC 14                        	SUB	ESP,20
    97 000000B9 6B 4D 08 15                     	IMUL	ECX,DWORD [8+EBP],21
    98 000000BD 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
    99 000000C0 8B 45 18                        	MOV	EAX,DWORD [24+EBP]
   100 000000C3 83 E2 01                        	AND	EDX,1
   101 000000C6 83 E0 01                        	AND	EAX,1
   102 000000C9 8D 04 42                        	LEA	EAX,DWORD [EDX+EAX*2]
   103 000000CC 8B 1C 85 [0000000C]             	MOV	EBX,DWORD [_table.0+EAX*4]
   104 000000D3 89 C8                           	MOV	EAX,ECX
   105 000000D5 99                              	CDQ
   106 000000D6 F7 FE                           	IDIV	ESI
   107 000000D8 6B 75 0C 15                     	IMUL	ESI,DWORD [12+EBP],21
   108 000000DC 89 C1                           	MOV	ECX,EAX
   109 000000DE 89 F0                           	MOV	EAX,ESI
   110 000000E0 99                              	CDQ
   111 000000E1 F7 FF                           	IDIV	EDI
   112 000000E3 6B 75 10 15                     	IMUL	ESI,DWORD [16+EBP],21
   113 000000E7 89 45 E0                        	MOV	DWORD [-32+EBP],EAX
   114 000000EA 01 D9                           	ADD	ECX,EBX
   115 000000EC 89 F0                           	MOV	EAX,ESI
   116 000000EE 99                              	CDQ
   117 000000EF F7 FF                           	IDIV	EDI
   118 000000F1 89 C6                           	MOV	ESI,EAX
   119 000000F3 BF 00000004                     	MOV	EDI,4
   120 000000F8 89 C8                           	MOV	EAX,ECX
   121 000000FA 99                              	CDQ
   122 000000FB F7 FF                           	IDIV	EDI
   123 000000FD 89 C1                           	MOV	ECX,EAX
   124 000000FF 8B 45 E0                        	MOV	EAX,DWORD [-32+EBP]
   125 00000102 01 D8                           	ADD	EAX,EBX
   126 00000104 8D 1C 33                        	LEA	EBX,DWORD [EBX+ESI*1]
   127 00000107 99                              	CDQ
   128 00000108 F7 FF                           	IDIV	EDI
   129 0000010A 89 45 E0                        	MOV	DWORD [-32+EBP],EAX
   130 0000010D 89 D8                           	MOV	EAX,EBX
   131 0000010F 99                              	CDQ
   132 00000110 F7 FF                           	IDIV	EDI
   133 00000112 89 C3                           	MOV	EBX,EAX
   134 00000114 6B 45 E0 06                     	IMUL	EAX,DWORD [-32+EBP],6
   135 00000118 6B D3 24                        	IMUL	EDX,EBX,36
   136 0000011B 83 C4 14                        	ADD	ESP,20
   137 0000011E 8D 04 08                        	LEA	EAX,DWORD [EAX+ECX*1]
   138 00000121 5B                              	POP	EBX
   139 00000122 5E                              	POP	ESI
   140 00000123 8D 44 02 10                     	LEA	EAX,DWORD [16+EDX+EAX*1]
   141 00000127 5F                              	POP	EDI
   142 00000128 0F B6 C0                        	MOVZX	EAX,AL
   143 0000012B 5D                              	POP	EBP
   144 0000012C C3                              	RET
